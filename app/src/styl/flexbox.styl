/*
 * Copyright (C) 2019 Shane F. Carr
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

@require("mixins.styl")

#f-main {
	position: absolute
	top: 0
	left: 0
	bottom: 0
	right: 0

	display: flex
	flex-flow: row nowrap

	& > #f-null {
		flex: 0 0 10px

		background-color: $gutter_color
	}

	& > #f-primary {
		flex: 1 1 780px

		display: flex
		flex-flow: column nowrap

		& > #f-top {
			flex: 1 1 300px
			overflow: auto

			display: flex
			flex-flow: row nowrap
			border-bottom: 3px solid $gutter_color

			& > #f-list {
				flex: 1 1 580px
				overflow: auto
				position: relative

				background-image: url(../assets/notebook/notebook.png)
				background-repeat: repeat
				
				& > #bottom-expander {
					position: fixed
					bottom: 0
					right: 0
					padding: 0 3px
					cursor: pointer
					z-index: 10
					font-family: sans-serif
					
					font-weight: bold
					color: white
					background-color: $gutter_color
				}
			}

			& > #f-preview {
				flex: 1 1 200px
				overflow: hidden  // allows for flexbox animation
				position: relative
				transition: flex-grow 0.2s, flex-shrink 0.2s, flex-basis 0.2s

				background-image: url(../assets/retina_wood/retina_wood.png)
				background-repeat: repeat
				box-shadow: inset 0 0 10px white
				border-left: 3px solid $gutter_color

				& > .card-svg {
					margin: 6px
					width: calc(100% - 12px)
					height: calc(100% - 24px)
				}

				& > #preview-options {
					position: absolute
					left: 0
					bottom: 0
					width: 100%
					height: 12px
					padding: 0 0 0 1ex

					background-color: #000
					color: #FFF
					font-family: sans-serif
					font-size: 10px
					line-height: 12px
					vertical-align: middle

					label {
						display: inline
					}

					input[type=checkbox] {
						margin: -3px 0 0 0
						transform: scale(0.8) translate(0, 3px)
					}

					a {
						color: inherit
						text-decoration: inherit
					}
				}
			}
		}

		& > #f-bottom {
			flex: 1 1 100px
			position: relative
			// NOTE: If changing the transition duration here, also edit the bottomBigger() and bottomSmaller() functions in App.vue
			transition: flex-basis 0.2s

			display: flex
			flex-flow: row nowrap

			& > #f-tabs {
				flex: 1 0 50px

				display: flex
				flex-flow: column nowrap
				
				& > .f-tab {
					flex: 1 1 25px
					position: relative
					overflow: hidden

					background-color: $gutter_color
					font-family: sans-serif
					cursor: pointer
					
					& > span {
						position: absolute
						top: calc(50% - 0.5em)
						left: 3px
						height: 1em
						line-height: 1em
						vertical-align: center
					}
					
					&.active {
						background-color: $solarized_light
					}
				}
			}

			& > #f-editor {
				flex: 10 1 730px
				position: relative

				background-color: $gutter_color

				&.fields-container {
					display: flex
					flex-flow: row nowrap

					& > #f-fields-left {
						flex: 1 1 100px
						overflow: auto
					}

					& > #f-fields-right {
						flex: 10 1 630px
						overflow: auto
					}
				}
			}

			& > #f-bottom-size {
				position: absolute
				top: 0
				right: 0
				padding: 0 3px
				color: white
				background-color: $gutter_color
				z-index: 10
				
				& > span {
					font-size: 1em
					cursor: pointer
				}
			}
		}
	}

	& > #f-loading {
		flex: 1 1 800px
		position: relative
		overflow: hidden
		
		& > img.splash {
			position: absolute
			top: calc(50% - 144px)
			left: calc(50% - 144px)
			width: 288px
			height: 288px
		}
	}
}

.flex-hide {
	flex: 0 !important
}
